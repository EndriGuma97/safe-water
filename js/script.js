// ==========================================
// LANGUAGE TRANSLATIONS
// ==========================================
const translations = {
    sq: {
        // Navigation
        nav_home: "Ballina",
        nav_about: "Rreth Nesh",
        nav_system: "Sistemi",
        nav_benefits: "PÃ«rfitimet",
        nav_pricing: "Ã‡mimet",
        nav_contact: "Kontakt",
        nav_cta: "Merr OfertÃ«",

        // Hero Section
        hero_title: "UjÃ« i PastÃ«r dhe i ShÃ«ndetshÃ«m<br><span class='gradient-text'>Ã‡do DitÃ«</span>",
        hero_subtitle: "Sistemi i vetÃ«m 6-fazor RO+Alkalin me qera nÃ« ShqipÃ«ri. PastÃ«rti absolute dhe shije superiore pÃ«r familjen tuaj.",
        stat_purity: "PastÃ«rti",
        stat_phases: "Faza Pastrimi",
        stat_support: "MbÃ«shtetje",
        btn_start: "Fillo Tani",
        btn_learn: "MÃ«so MÃ« ShumÃ«",
        card_pure: "UjÃ« i PastÃ«r",
        card_tech: "Teknologji RO",
        card_alkaline: "pH Alkalin",

        // About Section
        about_subtitle: "Rreth Nesh",
        about_title: "Sistemi RO Compact 6-Fazor",
        about_description: "NjÃ« impiant me 6 faza pastrimi qÃ« pÃ«rdor teknologjinÃ« e osmozÃ«s sÃ« kundÃ«rt pÃ«r tÃ« larguar deri nÃ« 99.9% tÃ« ndotÃ«sve nga uji.",
        about_why_title: "Pse tÃ« zgjedhÃ«sh sistemin tonÃ«?",
        about_why_text: "Sistemi ynÃ« RO Compact nuk Ã«shtÃ« thjesht njÃ« filtÃ«r uji. Ã‹shtÃ« njÃ« zgjidhje e plotÃ« qÃ« kombinon pastÃ«rtinÃ« absolute tÃ« osmozÃ«s sÃ« kundÃ«rt me pÃ«rfitimet e ujit alkalin. Ndryshe nga sistemet e tjera qÃ« lÃ«nÃ« ujin \"tÃ« vdekur\", sistemi ynÃ« rivitalizon ujin duke shtuar minerale thelbÃ«sore.",
        feature_1: "Instalim dhe mirÃ«mbajtje falas",
        feature_2: "NdÃ«rrim filtri i rregullt i pÃ«rfshirÃ«",
        feature_3: "ShÃ«rbim klientesh 24/7",
        feature_4: "Pa kosto tÃ« fshehura",
        image_placeholder: "Sistemi RO Compact",

        // System Section
        system_subtitle: "Teknologjia JonÃ«",
        system_title: "6 Fazat e Pastrimit",
        system_description: "Ã‡do fazÃ« Ã«shtÃ« projektuar pÃ«r tÃ« hequr ndotÃ«s specifik dhe pÃ«r tÃ« garantuar ujÃ« tÃ« pastÃ«r dhe tÃ« shÃ«ndetshÃ«m.",
        phase1_title: "Filtri Polipropilen",
        phase1_desc: "Largon baltÃ«n, rÃ«rÃ«n dhe grimcat e ngurta. Barriera e parÃ« e kthjelltÃ«sisÃ« qÃ« pastron ujin nga Ã§do papastÃ«rti e dukshme.",
        phase1_benefit: "Mbrojtje fizike",
        phase2_title: "Karbon i Granuluar (GAC)",
        phase2_desc: "Thith klorin dhe komponimet organike. Rizbuloni shijen e vÃ«rtetÃ« tÃ« ujit, kafesÃ« dhe gatimit tuaj.",
        phase2_benefit: "Largon klorin",
        phase3_title: "Bllok Karboni (CTO)",
        phase3_desc: "Eliminon aromat e pakÃ«ndshme dhe pÃ«rmirÃ«son shijen. Hapi i dytÃ« i pastrimit tÃ« shijes pÃ«r freski tÃ« garantuar.",
        phase3_benefit: "Shije e pÃ«rsosur",
        phase4_title: "MembranÃ« RO",
        phase4_desc: "Zemra e sistemit. Heq metalet e rÃ«nda, kripÃ«rat, nitratet, bakteret dhe viruset. Mbrojtja absolute e shÃ«ndetit tuaj.",
        phase4_benefit: "99.9% PastÃ«rti",
        phase5_title: "Filtri Post-Carbon",
        phase5_desc: "Filtrim pÃ«rfundimtar pÃ«r shije tÃ« pastÃ«r. PÃ«rpunimi final qÃ« garanton ujÃ« absolutisht tÃ« freskÃ«t.",
        phase5_benefit: "PÃ«rfundim i pÃ«rsosur",
        phase6_title: "Filtri Alkalin",
        phase6_desc: "Balancon pH-nÃ« e ujit dhe e bÃ«n ujin alkalin. Rivitalizimi: ujÃ« i gjallÃ«, jo i vdekur. PÃ«rmirÃ«son shijen dhe shton minerale.",
        phase6_benefit: "UjÃ« i gjallÃ«",

        // Benefits Section
        benefits_subtitle: "PÃ«rfitimet",
        benefits_title: "Pse tÃ« MarrÃ«sh me Qera?",
        benefit1_title: "Kosto e UlÃ«t Mujore",
        benefit1_desc: "Pa investim tÃ« madh fillestar. Paguaj vetÃ«m njÃ« tarifÃ« tÃ« ulÃ«t mujore dhe gÃ«zo ujÃ« tÃ« pastÃ«r menjÃ«herÃ«.",
        benefit2_title: "MirÃ«mbajtje e PÃ«rfshirÃ«",
        benefit2_desc: "Ne kujdesemi pÃ«r gjithÃ§ka. NdÃ«rrim filtri, kontroll teknik dhe riparime - tÃ« gjitha pa kosto shtesÃ«.",
        benefit3_title: "ShÃ«ndet pÃ«r Familjen",
        benefit3_desc: "Mbrojtje nga metalet e rÃ«nda, klori, bakteret dhe viruset. Paqe mendore totale pÃ«r ty dhe familjen tÃ«nde.",
        benefit4_title: "MiqÃ«sor me Mjedisin",
        benefit4_desc: "Elimo shishet plastike. Kurse para dhe mbron planetin duke pÃ«rdorur ujÃ« tÃ« filtruar direkt nga rubineti.",
        benefit5_title: "Shije Superiore",
        benefit5_desc: "Kafeja, Ã§aji dhe gatimet do tÃ« kenÃ« shijen qÃ« meritojnÃ«. Pa klor, pa aromÃ« tÃ« pakÃ«ndshme.",
        benefit6_title: "UjÃ« Alkalin",
        benefit6_desc: "Ndryshe nga sistemet e tjera RO, sistemi ynÃ« rivitalizon ujin duke shtuar minerale thelbÃ«sore pÃ«r pH tÃ« balancuar.",

        // Pricing Section
        pricing_subtitle: "Ã‡mimet",
        pricing_title: "Zgjidh Planin TÃ«nd",
        pricing_description: "Plane fleksibÃ«l pÃ«r Ã§do familje. Pa kosto tÃ« fshehura, pa surpriza.",
        pricing_popular: "I Preferuar",
        pricing_monthly: "Mujor",
        pricing_per_month: "/muaj",
        pricing_best: "MÃ« i Miri",
        pricing_yearly: "Vjetor",
        pricing_per_year: "/vit",
        pricing_save: "Kurse XX%",
        pricing_trial: "ProvÃ« 1 Muaj",
        pricing_first_month: "/muaji i parÃ«",
        pricing_feat1: "âœ“ Instalim falas",
        pricing_feat2: "âœ“ MirÃ«mbajtje e pÃ«rfshirÃ«",
        pricing_feat3: "âœ“ NdÃ«rrim filtri Ã§do 6 muaj",
        pricing_feat4: "âœ“ ShÃ«rbim klientesh 24/7",
        pricing_feat5: "âœ“ Pa kontratÃ« afatgjatÃ«",
        pricing_feat6: "âœ“ Prioritet nÃ« shÃ«rbim",
        pricing_feat7: "âœ“ Zbritje pÃ«r pÃ«rtÃ«ritje",
        pricing_feat8: "âœ“ Provo pa angazhim",
        pricing_feat9: "âœ“ Kthehu kur tÃ« duash",
        pricing_btn: "Zgjedh Planin",
        pricing_btn_try: "Provo Tani",

        // Contact Section
        contact_subtitle: "Kontakt",
        contact_title: "Merr OfertÃ«n TÃ«nde",
        contact_description: "PlotÃ«so formularin dhe ne do tÃ« tÃ« kontaktojmÃ« brenda 24 orÃ«ve.",
        contact_phone: "Telefon",
        contact_email: "Email",
        contact_location: "Lokacioni",
        contact_address: "TiranÃ«, ShqipÃ«ri",
        contact_hours: "Orari",
        contact_hours_text: "E HÃ«nÃ« - E ShtunÃ«: 9:00 - 18:00",
        form_placeholder_title: "Vendos Zoho Form KÃ«tu",
        form_placeholder_text: "Kjo zonÃ« Ã«shtÃ« rezervuar pÃ«r formularin e Zoho. ZÃ«vendÃ«so kÃ«tÃ« element me kodin e formularit tÃ«nd.",

        // Footer
        footer_text: "Sistemi i vetÃ«m 6-fazor RO+Alkalin me qera nÃ« ShqipÃ«ri pÃ«r ujÃ« tÃ« pastÃ«r dhe tÃ« shÃ«ndetshÃ«m.",
        footer_links: "Lidhje",
        footer_services: "ShÃ«rbimet",
        footer_rental: "Qira Sistemi",
        footer_maintenance: "MirÃ«mbajtje",
        footer_install: "Instalim",
        footer_support: "MbÃ«shtetje",
        footer_follow: "Na Ndiq",
        footer_copyright: "&copy; 2024 Filtra Uji. TÃ« gjitha tÃ« drejtat e rezervuara."
    },
    en: {
        // Navigation
        nav_home: "Home",
        nav_about: "About Us",
        nav_system: "System",
        nav_benefits: "Benefits",
        nav_pricing: "Pricing",
        nav_contact: "Contact",
        nav_cta: "Get Quote",

        // Hero Section
        hero_title: "Pure and Healthy Water<br><span class='gradient-text'>Every Day</span>",
        hero_subtitle: "The only 6-stage RO+Alkaline rental system in Albania. Absolute purity and superior taste for your family.",
        stat_purity: "Purity",
        stat_phases: "Filtration Stages",
        stat_support: "Support",
        btn_start: "Start Now",
        btn_learn: "Learn More",
        card_pure: "Pure Water",
        card_tech: "RO Technology",
        card_alkaline: "Alkaline pH",

        // About Section
        about_subtitle: "About Us",
        about_title: "6-Stage RO Compact System",
        about_description: "A 6-stage purification system that uses reverse osmosis technology to remove up to 99.9% of contaminants from water.",
        about_why_title: "Why choose our system?",
        about_why_text: "Our RO Compact system is not just a water filter. It's a complete solution that combines the absolute purity of reverse osmosis with the benefits of alkaline water. Unlike other systems that leave water \"dead\", our system revitalizes water by adding essential minerals.",
        feature_1: "Free installation and maintenance",
        feature_2: "Regular filter replacement included",
        feature_3: "24/7 customer service",
        feature_4: "No hidden costs",
        image_placeholder: "RO Compact System",

        // System Section
        system_subtitle: "Our Technology",
        system_title: "6 Filtration Stages",
        system_description: "Each stage is designed to remove specific contaminants and guarantee pure and healthy water.",
        phase1_title: "Polypropylene Filter",
        phase1_desc: "Removes mud, sand and solid particles. The first barrier of clarity that cleans water from any visible impurity.",
        phase1_benefit: "Physical protection",
        phase2_title: "Granular Activated Carbon (GAC)",
        phase2_desc: "Absorbs chlorine and organic compounds. Rediscover the true taste of water, coffee and your cooking.",
        phase2_benefit: "Removes chlorine",
        phase3_title: "Carbon Block (CTO)",
        phase3_desc: "Eliminates unpleasant odors and improves taste. The second step of taste purification for guaranteed freshness.",
        phase3_benefit: "Perfect taste",
        phase4_title: "RO Membrane",
        phase4_desc: "The heart of the system. Removes heavy metals, salts, nitrates, bacteria and viruses. Absolute protection for your health.",
        phase4_benefit: "99.9% Purity",
        phase5_title: "Post-Carbon Filter",
        phase5_desc: "Final filtration for pure taste. Final processing that guarantees absolutely fresh water.",
        phase5_benefit: "Perfect finish",
        phase6_title: "Alkaline Filter",
        phase6_desc: "Balances water pH and makes water alkaline. Revitalization: living water, not dead. Improves taste and adds minerals.",
        phase6_benefit: "Living water",

        // Benefits Section
        benefits_subtitle: "Benefits",
        benefits_title: "Why Rent?",
        benefit1_title: "Low Monthly Cost",
        benefit1_desc: "No large upfront investment. Pay only a low monthly fee and enjoy pure water immediately.",
        benefit2_title: "Maintenance Included",
        benefit2_desc: "We take care of everything. Filter replacement, technical checks and repairs - all at no extra cost.",
        benefit3_title: "Health for Family",
        benefit3_desc: "Protection from heavy metals, chlorine, bacteria and viruses. Total peace of mind for you and your family.",
        benefit4_title: "Eco-Friendly",
        benefit4_desc: "Eliminate plastic bottles. Save money and protect the planet by using filtered water directly from the tap.",
        benefit5_title: "Superior Taste",
        benefit5_desc: "Coffee, tea and cooking will have the taste they deserve. No chlorine, no unpleasant odor.",
        benefit6_title: "Alkaline Water",
        benefit6_desc: "Unlike other RO systems, our system revitalizes water by adding essential minerals for balanced pH.",

        // Pricing Section
        pricing_subtitle: "Pricing",
        pricing_title: "Choose Your Plan",
        pricing_description: "Flexible plans for every family. No hidden costs, no surprises.",
        pricing_popular: "Popular",
        pricing_monthly: "Monthly",
        pricing_per_month: "/month",
        pricing_best: "Best Value",
        pricing_yearly: "Yearly",
        pricing_per_year: "/year",
        pricing_save: "Save XX%",
        pricing_trial: "1 Month Trial",
        pricing_first_month: "/first month",
        pricing_feat1: "âœ“ Free installation",
        pricing_feat2: "âœ“ Maintenance included",
        pricing_feat3: "âœ“ Filter replacement every 6 months",
        pricing_feat4: "âœ“ 24/7 customer service",
        pricing_feat5: "âœ“ No long-term contract",
        pricing_feat6: "âœ“ Service priority",
        pricing_feat7: "âœ“ Renewal discount",
        pricing_feat8: "âœ“ Try without commitment",
        pricing_feat9: "âœ“ Return anytime",
        pricing_btn: "Choose Plan",
        pricing_btn_try: "Try Now",

        // Contact Section
        contact_subtitle: "Contact",
        contact_title: "Get Your Quote",
        contact_description: "Fill out the form and we will contact you within 24 hours.",
        contact_phone: "Phone",
        contact_email: "Email",
        contact_location: "Location",
        contact_address: "Tirana, Albania",
        contact_hours: "Hours",
        contact_hours_text: "Monday - Saturday: 9:00 - 18:00",
        form_placeholder_title: "Place Zoho Form Here",
        form_placeholder_text: "This area is reserved for the Zoho form. Replace this element with your form code.",

        // Footer
        footer_text: "The only 6-stage RO+Alkaline rental system in Albania for pure and healthy water.",
        footer_links: "Links",
        footer_services: "Services",
        footer_rental: "System Rental",
        footer_maintenance: "Maintenance",
        footer_install: "Installation",
        footer_support: "Support",
        footer_follow: "Follow Us",
        footer_copyright: "&copy; 2024 Water Filters. All rights reserved."
    }
};

// ==========================================
// GLOBAL STATE
// ==========================================
let currentLang = 'sq';

// ==========================================
// LANGUAGE SWITCHING
// ==========================================
function switchLanguage() {
    currentLang = currentLang === 'sq' ? 'en' : 'sq';
    document.documentElement.lang = currentLang;

    // Update language button text
    const langBtn = document.getElementById('langToggle');
    langBtn.querySelector('.lang-text').textContent = currentLang === 'sq' ? 'EN' : 'SQ';

    // Update all translatable elements
    const elements = document.querySelectorAll('[data-translate]');
    elements.forEach(element => {
        const key = element.getAttribute('data-translate');
        if (translations[currentLang][key]) {
            element.innerHTML = translations[currentLang][key];
        }
    });

    // Store language preference
    localStorage.setItem('preferredLanguage', currentLang);
}

// ==========================================
// NAVBAR SCROLL EFFECT
// ==========================================
function handleNavbarScroll() {
    const navbar = document.querySelector('.navbar');
    if (window.scrollY > 50) {
        navbar.classList.add('scrolled');
    } else {
        navbar.classList.remove('scrolled');
    }
}

// ==========================================
// SMOOTH SCROLL
// ==========================================
function smoothScroll() {
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
                const offsetTop = target.offsetTop - 80;
                window.scrollTo({
                    top: offsetTop,
                    behavior: 'smooth'
                });
            }
        });
    });
}

// ==========================================
// MOBILE MENU TOGGLE
// ==========================================
function setupMobileMenu() {
    const mobileToggle = document.getElementById('mobileToggle');
    const navMenu = document.querySelector('.nav-menu');

    if (mobileToggle) {
        mobileToggle.addEventListener('click', () => {
            navMenu.classList.toggle('active');
            mobileToggle.classList.toggle('active');
        });

        // Close menu when clicking on a link
        const menuLinks = document.querySelectorAll('.nav-menu a');
        menuLinks.forEach(link => {
            link.addEventListener('click', () => {
                navMenu.classList.remove('active');
                mobileToggle.classList.remove('active');
            });
        });
    }
}

// ==========================================
// INTERSECTION OBSERVER FOR ANIMATIONS
// ==========================================
function setupScrollAnimations() {
    const observerOptions = {
        threshold: 0.1,
        rootMargin: '0px 0px -100px 0px'
    };

    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.style.opacity = '1';
                entry.target.style.transform = 'translateY(0)';
            }
        });
    }, observerOptions);

    // Observe elements
    const animatedElements = document.querySelectorAll('.phase-card, .benefit-card, .pricing-card, .info-card');
    animatedElements.forEach(el => {
        el.style.opacity = '0';
        el.style.transform = 'translateY(30px)';
        el.style.transition = 'opacity 0.6s ease-out, transform 0.6s ease-out';
        observer.observe(el);
    });
}

// ==========================================
// CTA BUTTON ACTIONS
// ==========================================
function setupCTAButtons() {
    const ctaButtons = document.querySelectorAll('.btn-primary, .btn-secondary, .cta-button');
    ctaButtons.forEach(button => {
        button.addEventListener('click', (e) => {
            // Check if button is inside pricing or hero section
            const isPricingBtn = button.closest('.pricing-card');
            const isHeroBtn = button.closest('.hero');

            if (isPricingBtn || isHeroBtn || button.classList.contains('cta-button')) {
                e.preventDefault();
                // Scroll to contact form
                const contactSection = document.getElementById('contact');
                if (contactSection) {
                    const offsetTop = contactSection.offsetTop - 80;
                    window.scrollTo({
                        top: offsetTop,
                        behavior: 'smooth'
                    });
                }
            }
        });
    });
}

// ==========================================
// LOADING ANIMATION
// ==========================================
function initLoadingAnimation() {
    document.body.style.opacity = '0';
    window.addEventListener('load', () => {
        document.body.style.transition = 'opacity 0.5s ease-in';
        document.body.style.opacity = '1';
    });
}

// ==========================================
// INITIALIZE
// ==========================================
document.addEventListener('DOMContentLoaded', () => {
    // Check for saved language preference
    const savedLang = localStorage.getItem('preferredLanguage');
    if (savedLang && savedLang !== currentLang) {
        switchLanguage();
    }

    // Setup language toggle button
    const langToggle = document.getElementById('langToggle');
    if (langToggle) {
        langToggle.addEventListener('click', switchLanguage);
    }

    // Initialize all features
    smoothScroll();
    setupMobileMenu();
    setupScrollAnimations();
    setupCTAButtons();
    initLoadingAnimation();

    // Add scroll event listener for navbar
    window.addEventListener('scroll', handleNavbarScroll);

    // Add hover effect to phase cards
    const phaseCards = document.querySelectorAll('.phase-card');
    phaseCards.forEach(card => {
        card.addEventListener('mouseenter', function() {
            this.style.transform = 'translateY(-8px) scale(1.02)';
        });
        card.addEventListener('mouseleave', function() {
            this.style.transform = 'translateY(0) scale(1)';
        });
    });

    // Add parallax effect to hero background
    window.addEventListener('scroll', () => {
        const scrolled = window.pageYOffset;
        const heroBg = document.querySelector('.hero-bg');
        if (heroBg) {
            heroBg.style.transform = `translateY(${scrolled * 0.5}px)`;
        }
    });

    // Console message
    console.log('%cğŸš° Filtra Uji - Sistemi RO Compact 6-Fazor', 'font-size: 20px; color: #00B4D8; font-weight: bold;');
    console.log('%cWebsite built with modern HTML, CSS, and JavaScript', 'font-size: 14px; color: #6b7280;');
});

// ==========================================
// UTILITY FUNCTIONS
// ==========================================

// Debounce function for performance
function debounce(func, wait) {
    let timeout;
    return function executedFunction(...args) {
        const later = () => {
            clearTimeout(timeout);
            func(...args);
        };
        clearTimeout(timeout);
        timeout = setTimeout(later, wait);
    };
}

// Add resize listener with debounce
window.addEventListener('resize', debounce(() => {
    // Handle any resize-specific logic here
    console.log('Window resized');
}, 250));

// Prevent horizontal scroll
document.body.style.overflowX = 'hidden';
document.documentElement.style.overflowX = 'hidden';
